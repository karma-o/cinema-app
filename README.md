# cinema-app

---
This application was made for educational and demonstration purposes.
Simulates a ticket's reservation in a cinema.

Program has next functionalities:
- Register a new user
- Login (with username and password)
- Role based authorization (admin, user)
- Handles exception (invalid username, password, invalid role) and sends a convenient message
- Endpoints:
<pre>
[POST]   /register - registers a new user
[POST]   /cinema-halls - creates a new cinema hall
[GET]    /cinema-halls - returns all cinema halls
[POST]   /movies - creates a new movie
[GET]    /movies - returns all movies
[POST]   /movie-sessions - creates a new movie session
[GET]    /movie-sessions/available - returns all available movie sessions for the selected movie
[PUT]    /movie-sessions/{id} - updates a movie session
[DELETE] /movie-sessions/{id} - deletes a movie session
[POST]   /orders/complete - completes an order
[GET]    /orders - returns order history of user
[PUT]    /shopping-carts/movie-sessions - adds a movie session to shopping cart
[GET]    /shopping-carts/by-user - returns shopping cart of logged user
[GET]    /users/by-email - returns user by email
</pre>
All endpoints are either receiving or sending JSON data 
except login page which is generated by spring security.

Almost all endpoints are secured by role based authorization. You can look up for details in the ```SecurityConfig``` class

---
## Architecture
1. REST API
2. SOLID principles
3. package structure: 
   - config - stores spring configuration
   - controller - contains controllers for endpoints
   - DAO - Data access layer(repository) calls CRUD methods in database
   - DTO - Wrapper for model objects to unify the requests and responses in controllers
   - lib - contains email and password validators with its annotations
   - model - contains models for database 
   - service - contains services which are calling repositories and Authentication class
      - mapper - converts model objects to DTO objects

---
## Technologies
- Java 11
- Apache Maven
- Apache TomCat - version 9.X.X
- MySQL
- Hibernate
- Spring:
   - Core
   - Web Mvc
   - Security

---
## How to run and test
*WARNING* Installed TomCat and MySQL is required for this project.
1. Set up a database connection parameters in the ```resources/db.properties``` file.
2. Add a tomcat local configuration in IntelliJ.
3. Run Tomcat configuration.
4. Login as mock admin user(username: admin@i.ua, password: admin123) at ```localhost:8080/login```. to test functionalities 
or register a new user via sending a POST request to ```localhost:8080/register``` with email, password and repeatPassword.

---
## Contacts
My [LinkedIn](https://www.linkedin.com/in/vadym-turchenko-6b5884209/)  
I am open for new opportunities as Junior Java Developer